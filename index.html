<!DOCTYPE html>
<html>
<head>
<title>Da forums!</title>
<style>
  body { background-color: #222; color: #ccc; font-family: Verdana, Arial, Helvetica, sans-serif; margin: 0; padding: 10px; }
  .header { background: #333; border: 1px solid #444; padding: 10px; margin-bottom: 10px; }
  .header h1 { color: #fff; margin: 0; font-size: 24px; text-shadow: 1px 1px #000; }
  .warning { color: #ff4444; font-size: 12px; font-weight: bold; margin-top: 5px; }
  .chat-container { background: #333; border: 1px solid #444; height: 400px; overflow-y: scroll; padding: 10px; display: flex; flex-direction: column; gap: 5px; }
  .message { background: #3a3a3a; border-left: 3px solid #666; padding: 8px; font-size: 13px; line-height: 1.4; }
  .message b { color: #fff; font-size: 12px; display: block; margin-bottom: 2px; }
  .controls { background: #333; border: 1px solid #444; padding: 10px; margin-top: 10px; display: flex; gap: 5px; }
  input[type="text"] { background: #111; border: 1px solid #555; color: #fff; padding: 8px; flex-grow: 1; font-family: inherit; }
  button { background: #555; border: 1px solid #777; color: #fff; padding: 8px 15px; cursor: pointer; font-weight: bold; }
  button:hover { background: #666; }
  .user-input { width: 100px; }
</style>
</head>
<body>

<div class="header">
  <h1>Da forums!</h1>
  <div class="warning">REPORT BUGS AND HACKS! KEEP LE FORUMS SAFE!</div>
</div>

<div class="chat-container" id="chat"></div>

<div class="controls">
  <input type="text" id="user" class="user-input" placeholder="Username" maxlength="15">
  <input type="text" id="msg" placeholder="Write a message..." onkeydown="if(event.key==='Enter') send()">
  <button onclick="send()">Post</button>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
  const config = { databaseURL: "https://da-forums-default-rtdb.firebaseio.com/" };
  firebase.initializeApp(config);
  const db = firebase.database().ref("messages");

  function send() {
    const user = document.getElementById('user').value || "Guest";
    const msg = document.getElementById('msg').value;
    if (msg.trim() === "") return;
    db.push({ user: user, text: msg, time: Date.now() });
    document.getElementById('msg').value = "";
  }

  db.limitToLast(50).on("value", (snap) => {
    const container = document.getElementById('chat');
    container.innerHTML = "";
    snap.forEach((child) => {
      const data = child.val();
      const div = document.createElement('div');
      div.className = "message";
      div.innerHTML = `<b>${data.user}</b>${data.text}`;
      container.appendChild(div);
    });
    container.scrollTop = container.scrollHeight;
  });
</script>

</body>
</html>
